<!-- ↓↓↓  BEGIN INSMARK WIDGET  ↓↓↓ -->
<style>
  /* minimale styling */
  #insmark-widget{max-width:800px;margin:40px auto;background:#fff;border-radius:12px;
    padding:24px;box-shadow:0 4px 12px rgba(0,0,0,0.05);font-family:Roboto,sans-serif;}
  #insmark-widget h2{text-align:center;margin-bottom:24px;font-size:1.75rem;}
  #insmark-widget .row{display:flex;gap:12px;align-items:flex-end;}
  #insmark-widget .row > div{flex:1;}
  #insmark-widget input{width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;}
  #insmark-widget button{padding:10px 16px;background:#3c8e76;color:#fff;
    border:none;border-radius:6px;cursor:pointer;font-size:1rem;}
  #insmark-widget button:disabled{background:#aac8b8;cursor:not-allowed;}
</style>

<div id="insmark-widget">
  <h2>Bezorgprijs-calculator</h2>
  <div class="row">
    <div>
      <label for="ins-origin">Van</label>
      <input id="ins-origin" placeholder="Straat, postcode of plaats">
    </div>
    <div>
      <label for="ins-dest">Naar</label>
      <input id="ins-dest" placeholder="Straat, postcode of plaats">
    </div>
    <div style="flex:0 0 auto">
      <button id="ins-go" disabled>Bereken afstand</button>
    </div>
  </div>
</div>

<script>
  // globale vars voor latLng
  let _insOrigin=null, _insDest=null;
  function insInit(){
    const ori=document.getElementById('ins-origin');
    const dst=document.getElementById('ins-dest');
    const btn=document.getElementById('ins-go');

    const acO = new google.maps.places.Autocomplete(ori,{componentRestrictions:{country:'nl'}});
    const acD = new google.maps.places.Autocomplete(dst,{componentRestrictions:{country:'nl'}});

    acO.addListener('place_changed',()=>{
      const p=acO.getPlace();
      _insOrigin = p.geometry?.location||null;
      btn.disabled = !_insOrigin||!_insDest;
    });
    acD.addListener('place_changed',()=>{
      const p=acD.getPlace();
      _insDest = p.geometry?.location||null;
      btn.disabled = !_insOrigin||!_insDest;
    });

    btn.addEventListener('click',()=>{
      const svc=new google.maps.DistanceMatrixService();
      svc.getDistanceMatrix({
        origins:      [_insOrigin],
        destinations: [_insDest],
        travelMode:   google.maps.TravelMode.DRIVING,
        unitSystem:   google.maps.UnitSystem.METRIC,
      },(resp,status)=>{
        if(status!=='OK'
           || !resp.rows.length
           || resp.rows[0].elements[0].status!=='OK'){
          return alert('Afstands­berekening mislukt – probeer opnieuw.');
        }
        const el = resp.rows[0].elements[0];
        // hier kun je door naar stap 2 van je form, óf:
        alert(`Afstand: ${el.distance.text}\nDuur: ${el.duration.text}`);
      });
    });
  }
</script>

<!-- laad Maps & Places, voert callback uit zodra JS geladen is -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBy6opG7A2AgleOq_q2AXtJ6wrn2eJQJsc&libraries=places&callback=insInit"
  async defer>
</script>
<!-- ↑↑↑  EINDE INSMARK WIDGET  ↑↑↑ -->
