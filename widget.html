<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ritprijs Calculator</title>
  <!-- Google Maps + Places + Distance Matrix -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AlzaSyBy6opG7A2AgleOq_q2AXtJ6wrn2eJQJsc&libraries=places&callback=initWidget">
  </script>
  <style>
    body { margin:0; padding:0; font-family:sans-serif; background:#f4f4f4 }
    .wizard { background:#fff; max-width:800px; margin:20px auto; border-radius:8px;
              box-shadow:0 4px 12px rgba(0,0,0,0.1); padding:24px }
    h2 { text-align:center; }
    .steps { display:flex; align-items:center; justify-content:center; margin:16px 0 }
    .step { width:32px; height:32px; border-radius:50%; background:#ddd;
            color:#555; display:flex; align-items:center; justify-content:center;
            font-weight:bold }
    .step.active { background:#007bff; color:#fff }
    .connector { flex:1; height:2px; background:#ddd; margin:0 8px }
    .fields { display:flex; gap:12px; align-items:flex-end }
    .field { flex:1; display:flex; flex-direction:column }
    label { font-weight:600; margin-bottom:4px; color:#333 }
    input { padding:10px; border:1px solid #ccc; border-radius:4px; font-size:14px }
    button { padding:12px 24px; border:none; border-radius:4px; font-size:14px;
             cursor:pointer; font-weight:bold }
    .btn-primary { background:#28a745; color:#fff }
    .btn-primary:disabled { background:#a9d5b8; cursor:not-allowed }
    .result { display:none; text-align:center; margin-top:24px }
    .result.active { display:block }
    .price { font-size:24px; font-weight:bold; color:#333; margin:8px 0 }
    .note  { font-size:12px; color:#777 }
  </style>
</head>
<body>
  <div class="wizard">
    <h2>Bereken uw ritprijs</h2>
    <div class="steps">
      <div class="step active">1</div><div class="connector"></div>
      <div class="step">2</div><div class="connector"></div>
      <div class="step">3</div><div class="connector"></div>
      <div class="step">4</div><div class="connector"></div>
      <div class="step">5</div><div class="connector"></div>
      <div class="step">6</div>
    </div>
    <div class="fields">
      <div class="field">
        <label for="origin">Van</label>
        <input id="origin" type="text" placeholder="Straat, postcode of plaats">
      </div>
      <div class="field">
        <label for="destination">Naar</label>
        <input id="destination" type="text" placeholder="Straat, postcode of plaats">
      </div>
      <button id="calcBtn" class="btn-primary" disabled>Bereken prijs →</button>
    </div>
    <div id="result" class="result">
      <p class="note">Let op: dit is een indicatie alleen.</p>
      <p id="priceDisplay" class="price"></p>
    </div>
  </div>

  <script>
    function initWidget(){
      const oIn = document.getElementById('origin');
      const dIn = document.getElementById('destination');
      const btn = document.getElementById('calcBtn');
      const res = document.getElementById('result');
      const disp= document.getElementById('priceDisplay');

      // Geen <form> of required → geen validatie van buitenaf
      [oIn,dIn].forEach(i=>i.required=false);

      const acO = new google.maps.places.Autocomplete(oIn,{componentRestrictions:{country:'nl'}});
      const acD = new google.maps.places.Autocomplete(dIn,{componentRestrictions:{country:'nl'}});

      let okO=false, okD=false;
      acO.addListener('place_changed', ()=>{
        okO = !!acO.getPlace().geometry;
        btn.disabled = !(okO && okD);
      });
      acD.addListener('place_changed', ()=>{
        okD = !!acD.getPlace().geometry;
        btn.disabled = !(okO && okD);
      });

      btn.addEventListener('click', ()=>{
        const orig = acO.getPlace().formatted_address;
        const dest = acD.getPlace().formatted_address;
        new google.maps.DistanceMatrixService().getDistanceMatrix({
          origins:[orig], destinations:[dest], travelMode:'DRIVING'
        }, (r,s)=>{
          if(s==='OK' && r.rows[0].elements[0].status==='OK'){
            const km = r.rows[0].elements[0].distance.value/1000;
            disp.textContent = '€ '+(km*1.20).toFixed(2);
          } else {
            disp.textContent = 'Kan afstand niet bepalen.';
          }
          res.classList.add('active');
        });
      });
    }
  </script>
</body>
</html>
