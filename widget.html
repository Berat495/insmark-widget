<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Uitgebreide Ritprijs Wizard</title>
  <style>
    body { font-family: sans-serif; background: #f2f3f5; margin: 0; padding: 0; }
    .container { max-width: 700px; margin: 40px auto; background: #fff; border-radius: 8px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h1 { text-align:center; margin-bottom:24px; }
    fieldset { display: none; border: none; padding: 0; }
    fieldset.active { display: block; }
    .buttons { margin-top: 24px; display: flex; justify-content: space-between; }
    .buttons button { padding: 10px 20px; border:none; border-radius:6px; background:#0073e6; color:white; cursor:pointer; }
    .buttons button[disabled] { background:#ccc; cursor:not-allowed; }
    label { display:block; margin-bottom:12px; }
    input, select { width:100%; padding:8px; margin-top:4px; border:1px solid #ccc; border-radius:4px; }
    .add-package { margin:12px 0; text-align:right; }
    .package { border:1px solid #ddd; padding:12px; margin-bottom:12px; border-radius:4px; background:#f9f9f9; }
  </style>
</head>
<body>

  <div class="container">
    <h1>Ritprijs Berekenen</h1>
    <form id="wizard-form">
      <!-- Stap 1: Adressen -->
      <fieldset class="active">
        <h2>1. Adressen</h2>
        <label>Ophaaladres
          <input id="origin-input" name="Ophaaladres" type="text" required placeholder="Straat, huisnr., plaats">
        </label>
        <label>Afleveradres
          <input id="destination-input" name="Afleveradres" type="text" required placeholder="Straat, huisnr., plaats">
        </label>
      </fieldset>

      <!-- Stap 2: Pakketten -->
      <fieldset>
        <h2>2. Pakketten</h2>
        <div id="packages"></div>
        <div class="add-package">
          <button type="button" id="add-package-btn">+ Pak toevoegen</button>
        </div>
      </fieldset>

      <!-- Stap 3: Ophalen details -->
      <fieldset>
        <h2>3. Ophalen Details</h2>
        <label>Verdieping Ophalen
          <input name="OphVerf" type="number" min="0" value="0">
        </label>
        <label>Gebouwtype Ophalen
          <select name="GebTypeOp">
            <option>Woning</option><option>Bedrijf</option><option>Magazijn</option><option>Veiling</option>
          </select>
        </label>
        <label>
          <input name="LiftOp" type="checkbox"> Lift aanwezig bij ophalen?
        </label>
      </fieldset>

      <!-- Stap 4: Afleveren details -->
      <fieldset>
        <h2>4. Afleveren Details</h2>
        <label>Verdieping Afleveren
          <input name="AfvVerf" type="number" min="0" value="0">
        </label>
        <label>Gebouwtype Afleveren
          <select name="GebTypeAf">
            <option>Woning</option><option>Bedrijf</option><option>Magazijn</option><option>Veiling</option>
          </select>
        </label>
        <label>
          <input name="LiftAf" type="checkbox"> Lift aanwezig bij afleveren?
        </label>
      </fieldset>

      <!-- Stap 5: Extra hulp -->
      <fieldset>
        <h2>5. Extra Hulp</h2>
        <label>
          <input name="ExtraHulp" type="checkbox"> Extra hulp nodig (bv. dragen, inpakken)?
        </label>
        <label>Opmerkingen
          <textarea name="Opmerkingen" rows="3" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;"></textarea>
        </label>
      </fieldset>

      <!-- Stap 6: Contact -->
      <fieldset>
        <h2>6. Contactgegevens</h2>
        <label>Naam
          <input name="Naam" type="text" required placeholder="Voor- en achternaam">
        </label>
        <label>Telefoon
          <input name="Telefoon" type="tel" required placeholder="06-1234-5678">
        </label>
        <label>E-mail
          <input name="E-mail" type="email" required placeholder="naam@voorbeeld.nl">
        </label>
      </fieldset>

      <!-- Navigatie knoppen -->
      <div class="buttons">
        <button type="button" id="prev-btn" disabled>Terug</button>
        <button type="button" id="next-btn">Volgende</button>
      </div>
    </form>
  </div>

  <script>
    // Wizard navigatie
    const fieldsets = document.querySelectorAll('fieldset');
    let current = 0;
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    function showStep(idx){
      fieldsets.forEach((fs,i)=> fs.classList.toggle('active', i===idx));
      prevBtn.disabled = idx===0;
      nextBtn.textContent = idx===fieldsets.length-1 ? 'Verstuur' : 'Volgende';
    }

    prevBtn.onclick = ()=> { if(current>0){ current--; showStep(current); } };
    nextBtn.onclick = ()=>{
      const fs = fieldsets[current];
      if(![...fs.querySelectorAll('[required]')].every(i=>i.value.trim()!=='')) {
        fs.querySelector('[required]').focus();
        return alert('Vul eerst alle verplichte velden in.');
      }
      if(current < fieldsets.length-1){
        current++;
        showStep(current);
      } else {
        // finale submit
        alert('Formulier verzonden met alle data:\n'+
          JSON.stringify(Object.fromEntries(new FormData(document.getElementById('wizard-form'))), null,2)
        );
        // hier kun je fetch('/jouw-endpoint',...) doen
      }
    };
    showStep(0);

    // Google Autocomplete init
    let aLoc,bLoc;
    function initAutocomplete(){
      const aIn = document.getElementById('origin-input')||document.querySelector('input[name="Ophaaladres"]');
      const bIn = document.getElementById('destination-input')||document.querySelector('input[name="Afleveradres"]');
      const acA = new google.maps.places.Autocomplete(aIn,{componentRestrictions:{country:'nl'}});
      const acB = new google.maps.places.Autocomplete(bIn,{componentRestrictions:{country:'nl'}});
      acA.addListener('place_changed',()=>{ aLoc = acA.getPlace().geometry?.location || null; });
      acB.addListener('place_changed',()=>{ bLoc = acB.getPlace().geometry?.location || null; });
    }

    // Pakketten dynamisch toevoegen
    document.getElementById('add-package-btn').addEventListener('click',()=>{
      const idx = document.querySelectorAll('.package').length + 1;
      const div = document.createElement('div');
      div.className = 'package';
      div.innerHTML = `
        <h4>Pakket ${idx}</h4>
        <label>Gewicht (kg)
          <input name="Gewicht_${idx}" type="number" step="0.1" required>
        </label>
        <label>Afmetingen (L×B×H, cm)
          <div style="display:flex;gap:8px;">
            <input name="Lengte_${idx}" type="number" step="0.1" required placeholder="L">
            <input name="Breedte_${idx}" type="number" step="0.1" required placeholder="B">
            <input name="Hoogte_${idx}" type="number" step="0.1" required placeholder="H">
          </div>
        </label>
      `;
      document.getElementById('packages').append(div);
    });
    // alvast één pakket
    document.getElementById('add-package-btn').click();
  </script>

  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBy6opG7A2AgleOq_q2AXtJ6wrn2eJQJsc&libraries=places&callback=initAutocomplete"
    async defer></script>
</body>
</html>
