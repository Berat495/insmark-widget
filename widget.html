<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Offerte Ritprijs Insmark</title>
  <style>
    /* ==========================================
       Basis styling
    ========================================== */
    #ritprijs-widget {
      max-width: 600px;
      margin: 40px auto;
      padding: 32px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.12);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
    }
    #ritprijs-widget h3 {
      text-align: center;
      color: #0073e6;
      margin-bottom: 24px;
      font-size: 1.75rem;
    }
    #ritprijs-form {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 16px;
    }
    #ritprijs-form label {
      display: flex;
      flex-direction: column;
      font-size: 0.9rem;
    }
    #ritprijs-form input,
    #ritprijs-form select {
      margin-top: 8px;
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 0.95rem;
      transition: border-color 0.2s;
    }
    #ritprijs-form input:focus,
    #ritprijs-form select:focus {
      border-color: #0073e6;
      outline: none;
    }
    .full-width { grid-column: 1 / -1; }
    #button-row {
      grid-column: 1 / -1;
      display: flex;
      gap: 12px;
      margin-top: 16px;
    }
    #button-row button {
      flex: 1;
      padding: 14px 0;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    #calculate-distance-btn {
      background-color: #0073e6;
      color: #fff;
    }
    #calculate-distance-btn:hover {
      background-color: #005bb5;
    }
    #offer-btn {
      background-color: #28a745;
      color: #fff;
      opacity: 0.6;
    }
    #offer-btn.enabled {
      opacity: 1;
    }
    #offer-btn:hover.enabled {
      background-color: #1e7e34;
    }
  </style>
</head>
<body>

<div id="ritprijs-widget">
  <h3>Bereken uw ritprijs</h3>

  <form
    id="ritprijs-form"
    action="https://formspree.io/f/xvgrwnbl"
    method="POST"
  >
    <!-- Persoonsgegevens -->
    <label class="full-width">Naam
      <input name="Naam" type="text" required placeholder="Voor- en achternaam">
    </label>
    <label class="full-width">Telefoonnummer
      <input name="Telefoon" type="tel" required placeholder="06-1234-5678">
    </label>
    <label class="full-width">E-mail
      <input id="_replyto" name="E-mail" type="email" required placeholder="naam@voorbeeld.nl">
    </label>

    <!-- Adressen -->
    <label class="full-width">Ophaaladres
      <input id="pickup-address" name="Ophaaladres" type="text" required placeholder="Straat en huisnummer, plaats">
    </label>
    <label class="full-width">Afleveradres
      <input id="delivery-address" name="Afleveradres" type="text" required placeholder="Straat en huisnummer, plaats">
    </label>

    <!-- Afstand -->
    <label>Afstand (km)
      <input id="distance" name="Afstand" type="text" readonly placeholder="Klik op Bereken afstand">
    </label>
    <div id="button-row">
      <button type="button" id="calculate-distance-btn">Bereken afstand</button>
      <button
        type="submit"
        id="offer-btn"
        class=""
        disabled
      >Offerte aanvragen</button>
    </div>

    <!-- Pakketgegevens -->
    <label>Gewicht (kg)
      <input name="Gewicht" type="number" step="0.1" required placeholder="bv. 5.0">
    </label>
    <label>Lengte (cm)
      <input name="Lengte" type="number" min="0" placeholder="bv. 50">
    </label>
    <label>Breedte (cm)
      <input name="Breedte" type="number" min="0" placeholder="bv. 40">
    </label>
    <label>Hoogte (cm)
      <input name="Hoogte" type="number" min="0" placeholder="bv. 30">
    </label>

    <!-- Verdere details -->
    <label>Ophalen verdieping
      <input name="OphalenVerdieping" type="number" min="0" value="0">
    </label>
    <label>Afleveren verdieping
      <input name="AfleverenVerdieping" type="number" min="0" value="0">
    </label>
    <label>Gebouwtype ophalen
      <select name="GebouwTypeOphalen">
        <option value="Woning">Woning</option>
        <option value="Bedrijf">Bedrijf</option>
        <option value="Magazijn">Magazijn</option>
        <option value="Veiling">Veiling</option>
      </select>
    </label>
    <label>Gebouwtype afleveren
      <select name="GebouwTypeAfleveren">
        <option value="Woning">Woning</option>
        <option value="Bedrijf">Bedrijf</option>
        <option value="Magazijn">Magazijn</option>
        <option value="Veiling">Veiling</option>
      </select>
    </label>
    <label>Extra hulp nodig?
      <select name="ExtraHulp">
        <option value="Nee">Nee</option>
        <option value="Ja">Ja</option>
      </select>
    </label>
    <label>Lift aanwezig?
      <select name="LiftAanwezig">
        <option value="Ja">Ja</option>
        <option value="Nee">Nee</option>
      </select>
    </label>

    <!-- Formspree invulveld -->
    <input type="hidden" name="_replyto" value="">
  </form>
</div>

<script>
  let pickupLatLng, deliveryLatLng;

  function initAutocomplete() {
    const pickupInput = document.getElementById('pickup-address');
    const deliveryInput = document.getElementById('delivery-address');
    const calcBtn = document.getElementById('calculate-distance-btn');
    const offerBtn = document.getElementById('offer-btn');
    const distanceField = document.getElementById('distance');

    const pickupAC = new google.maps.places.Autocomplete(pickupInput, {
      componentRestrictions: { country: 'nl' }
    });
    const deliveryAC = new google.maps.places.Autocomplete(deliveryInput, {
      componentRestrictions: { country: 'nl' }
    });

    pickupAC.addListener('place_changed', () => {
      const place = pickupAC.getPlace();
      pickupLatLng = place.geometry?.location || null;
    });
    deliveryAC.addListener('place_changed', () => {
      const place = deliveryAC.getPlace();
      deliveryLatLng = place.geometry?.location || null;
    });

    calcBtn.addEventListener('click', () => {
      if (!pickupLatLng || !deliveryLatLng) {
        alert('Selecteer eerst geldige ophaal- en afleveradressen.');
        return;
      }
      new google.maps.DistanceMatrixService().getDistanceMatrix({
        origins:      [ pickupLatLng ],
        destinations: [ deliveryLatLng ],
        travelMode:   google.maps.TravelMode.DRIVING,
        unitSystem:   google.maps.UnitSystem.METRIC
      }, (response, status) => {
        if (status !== 'OK'
            || !response.rows.length
            || response.rows[0].elements[0].status !== 'OK'
        ) {
          alert('Afstand kon niet worden opgehaald.');
          return;
        }
        const km = response.rows[0].elements[0].distance.value / 1000;
        const text = km.toFixed(1) + ' km';
        distanceField.value = text;

        // formulier mag nu worden verstuurd
        offerBtn.disabled = false;
        offerBtn.classList.add('enabled');
      });
    });
  }
</script>

<!-- Google Maps API (vul hier je API key in) -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBy6opG7A2AgleOq_q2AXtJ6wrn2eJQJsc&libraries=places&callback=initAutocomplete"
  async defer>
</script>
</body>
</html>
