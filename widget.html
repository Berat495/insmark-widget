<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bezorgprijscalculator</title>
  <style>
    * { box-sizing: border-box; margin:0; padding:0 }
    body { font-family:sans-serif; background:#f2f3f5; }
    .card { background:#fff; border-radius:12px; padding:24px; max-width:800px; margin:40px auto; box-shadow:0 4px 12px rgba(0,0,0,0.05); }
    h1 { text-align:center; margin-bottom:24px }
    .stepper { display:flex; justify-content:space-between; margin-bottom:32px }
    .step { width:32px; height:32px; border-radius:50%; background:#ddd; display:flex; align-items:center; justify-content:center; color:#555 }
    .step.active { background:#3c8e76; color:#fff }
    .step:not(:last-child)::after {
      content:''; position:absolute; width:100%; height:4px; background:#ddd; top:50%; left:calc(50% + 16px); transform:translateY(-50%);
    }
    .hidden { display:none }
    .form-row { display:flex; gap:16px; align-items:flex-end }
    .form-group { flex:1; display:flex; flex-direction:column }
    label { margin-bottom:8px; font-weight:500 }
    input, select { padding:12px; border:1px solid #ccc; border-radius:6px }
    button { padding:12px 24px; background:#3c8e76; color:#fff; border:none; border-radius:6px; cursor:pointer }
    button:disabled { background:#aac8b8; cursor:not-allowed }
  </style>
</head>
<body>

  <div class="card">
    <h1>Bezorgprijscalculator</h1>

    <!-- Stepper -->
    <div class="stepper">
      <div class="step active" id="lbl-step-1">1</div>
      <div class="step"       id="lbl-step-2">2</div>
      <div class="step"       id="lbl-step-3">3</div>
      <div class="step"       id="lbl-step-4">4</div>
      <div class="step"       id="lbl-step-5">5</div>
      <div class="step"       id="lbl-step-6">6</div>
    </div>

    <!-- STAP 1: Adres selecteren -->
    <div id="step-1">
      <div class="form-row">
        <div class="form-group">
          <label for="origin-input">Van</label>
          <input id="origin-input" type="text" placeholder="Straat, postcode of plaats">
        </div>
        <div class="form-group">
          <label for="destination-input">Naar</label>
          <input id="destination-input" type="text" placeholder="Straat, postcode of plaats">
        </div>
        <div class="form-group" style="flex:0 0 auto;">
          <button id="calculate-btn" disabled>Bereken afstand →</button>
        </div>
      </div>
    </div>

    <!-- STAP 2: Pakketinfo -->
    <div id="step-2" class="hidden">
      <div class="form-row">
        <div class="form-group">
          <label for="weight">Gewicht (kg)</label>
          <input id="weight" type="number" min="0.1" step="0.1" placeholder="Bijv. 1.5">
        </div>
        <div class="form-group">
          <label for="length">Lengte (cm)</label>
          <input id="length" type="number" min="1" placeholder="Bijv. 30">
        </div>
        <div class="form-group" style="flex:0 0 auto;">
          <button id="next-btn" disabled>Volgende →</button>
        </div>
      </div>
    </div>

    <!-- Hier kun je nog stap‐3 t/m 6 toevoegen op dezelfde manier -->
  </div>

  <script>
    let originLatLng, destinationLatLng;
    let distanceMeters, durationSeconds;

    function activateStep(n) {
      document.querySelectorAll('.stepper .step').forEach((el,i) => {
        el.classList.toggle('active', i < n);
      });
    }

    function showStep(n) {
      [1,2,3,4,5,6].forEach(i => {
        document.getElementById('step-' + i)
                ?.classList.toggle('hidden', i !== n);
      });
      activateStep(n);
    }

    function initAutocomplete() {
      const originInput = document.getElementById('origin-input');
      const destInput   = document.getElementById('destination-input');
      const calcBtn     = document.getElementById('calculate-btn');

      const originAC = new google.maps.places.Autocomplete(originInput, {
        componentRestrictions: { country: 'nl' }
      });
      originAC.setFields(['geometry']);

      const destAC = new google.maps.places.Autocomplete(destInput, {
        componentRestrictions: { country: 'nl' }
      });
      destAC.setFields(['geometry']);

      originAC.addListener('place_changed', () => {
        const place = originAC.getPlace();
        originLatLng = place.geometry?.location || null;
        calcBtn.disabled = !(originLatLng && destinationLatLng);
      });
      destAC.addListener('place_changed', () => {
        const place = destAC.getPlace();
        destinationLatLng = place.geometry?.location || null;
        calcBtn.disabled = !(originLatLng && destinationLatLng);
      });

      calcBtn.addEventListener('click', () => {
        if (!originLatLng || !destinationLatLng) return;
        const svc = new google.maps.DistanceMatrixService();
        svc.getDistanceMatrix({
          origins:      [originLatLng],
          destinations: [destinationLatLng],
          travelMode:   google.maps.TravelMode.DRIVING,
          unitSystem:   google.maps.UnitSystem.METRIC,
        }, (res, status) => {
          if (status!=='OK'
            || !res.rows.length
            || res.rows[0].elements[0].status!=='OK'
          ) {
            alert('Kan afstand niet ophalen.');
            return;
          }
          const el = res.rows[0].elements[0];
          distanceMeters  = el.distance.value;
          durationSeconds = el.duration.value;
          // **NIETS tonen**, gewoon door naar stap 2:
          showStep(2);
        });
      });

      // stap 2 → stap 3 (bijvoorbeeld)
      const weightInput = document.getElementById('weight');
      const nextBtn     = document.getElementById('next-btn');
      [weightInput].forEach(inp => {
        inp.addEventListener('input', () => {
          // eenvoudige check: gewicht ingevuld?
          nextBtn.disabled = !weightInput.value;
        });
      });
      nextBtn.addEventListener('click', () => {
        // hier kun je distanceMeters, durationSeconds en gewicht uitlezen
        // en naar stap 3 gaan:
        console.log('afstand (m):', distanceMeters);
        console.log('duur (s):',   durationSeconds);
        console.log('gewicht (kg):', weightInput.value);
        // … prijsberekening …
        // Daarna:
        // showStep(3);
      });
    }
  </script>

  <!-- Google Maps JS + Places -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBy6opG7A2AgleOq_q2AXtJ6wrn2eJQJsc&libraries=places&callback=initAutocomplete">
  </script>
</body>
</html>
